<!-- 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biiling Page</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
</head>
<body style="background-color: #EAEDF7;">
  <button class="btn btn-success m-2">
    <a href="index.html" class=" text-light text-decoration-none">Home</a>
  </button>
    <div class="container-fluid d-flex flex-column justify-content-between vh-100">
        
      <div class="row row-8 float-bottom p-5">
        <div class="row">
            <div class="col col-lg-4 m-2">
                <label for="itemName" class="form-label text-primary fw-bold">Item Name</label><br />
                <select class="form-select" id="itemName">
                    <option selected disabled>Select an Item</option>
                </select>
            </div>
            <div class="col col-lg-4 d-flex m-2">
                <div class="group">
                    <label for="quantity" class="form-label text-primary fw-bold">Quantity</label><br />
                    <input
                        type="number"
                        id="quantity"
                        class="form-control"
                        value="1"
                    />
                  </div>
                  <button
                      id="addItem"
                      class="btn btn-primary mx-2 my-4 border-dark border-2"
                      style="height: 30px"
                  >
                      Add
                  </button>
            </div>
        </div>

        <div class="row">
          <div class="col">
            <input
              type="button"
              class="btn btn-primary mx-2 border-dark border-2"
              value="Language"
            /><br />
            <div class="group m-2">
              <label class="mx-4 fw-medium">Table No</label><br />
              <input type="number" class="w-50" />
            </div>
            <div class="group">
              <label class="mx-4 fw-medium">No of Cover</label><br />
              <input type="number" class="w-50 mx-2" />
            </div>
          </div>
          <div class="col">
            <div class="group">
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 m-1 fw-bold"
                value="7"
              />
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 fw-bold"
                value="8"
              />
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 fw-bold"
                value="9"
              />
            </div>
            <div class="group">
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 m-1 fw-bold"
                value="4"
              />
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 fw-bold"
                value="5"
              />
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 fw-bold"
                value="6"
              />
            </div>
            <div class="group">
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 m-1 fw-bold"
                value="3"
              />
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 fw-bold"
                value="2"
              />
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 fw-bold"
                value="1"
              />
            </div>
            <div class="group">
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 m-1 fw-bold"
                value="0"
              />
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 fw-bold"
                value="."
              />
              <input
                type="button"
                class="btn btn-primary border-dark border-2 w-25 fw-bold"
                value="-"
              />
            </div>
          </div>
          <div class="col">
            <input
              type="button"
              class="bg-primary text-light fw-bold border-dark border-2 rounded-2"
              style="height: 90px; width: 80px; margin-bottom: 5px"
              value="AC"
            /><br />
            <input
              type="button"
              class="bg-primary text-light fw-bold border-dark border-2 rounded-2"
              style="height: 90px; width: 80px"
              value="Clear"
            />
          </div>
        </div>

      </div>
        
        
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

    <script>
const sampleInventory = [
            { name: "Item1", price: 10, purchased: 100, sold: 0 },
            { name: "Item2", price: 15, purchased: 50, sold: 10 },
            { name: "Item3", price: 20, purchased: 30, sold: 5 }
        ];

        const inventory = JSON.parse(localStorage.getItem("inventory")) || sampleInventory;
        let totalCost = 0;

        function populateItemDropdown() {
            const itemSelect = $('#itemName');
            inventory.forEach(item => {
                itemSelect.append(`<option value="${item.name.toLowerCase()}">${item.name} - $${parseFloat(item.price).toFixed(2)}</option>`);
            });
        }

        $(document).ready(function () {
            populateItemDropdown(); 

            const addedItemsTable = $('#addedItemsTable').DataTable();

            $("#addItem").click(function () {
                const itemName = $("#itemName").val();
                const quantity = parseInt($("#quantity").val(), 10);

                 console.log(`Item selected: ${itemName}, Quantity: ${quantity}`);

                const item = inventory.find((i) => i.name.toLowerCase() === itemName);

                if (item) {
                    if (item.purchased - item.sold >= quantity) {
                        const itemPrice = parseFloat(item.price) * quantity; // Ensure item.price is a number
                        const gstAmount = itemPrice * 0.07;
                        const payableAmount = itemPrice + gstAmount;

                        totalCost += payableAmount;

                        $("#payableAmount").text(itemPrice.toFixed(2));
                        $("#gstAmount").text(gstAmount.toFixed(2));
                        $("#totalAmount").text(totalCost.toFixed(2));

                        addedItemsTable.row.add([
                            item.name,
                            quantity,
                            parseFloat(item.price).toFixed(2),
                            itemPrice.toFixed(2)
                        ]).draw();

                        item.sold += quantity;  // Update sold quantity
                        localStorage.setItem("inventory", JSON.stringify(inventory)); // Save updated inventory

                        alert("Item added successfully!");
                    } else {
                        alert("Insufficient stock available.");
                    }
                } else {
                    alert("Item not found in inventory.");
                }
            });
        });
    </script>
</body>
</html> 

  -->

  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billing Page</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous"
    />
</head>
<body>
    <div class="container">
        <h2>Bill Summary</h2>
        <h4>Payable Amount: $<span id="payableAmount">0.00</span></h4>
        <h4>GST (7%): $<span id="gstAmount">0.00</span></h4>
        <h4>Total Amount: $<span id="totalAmount">0.00</span></h4>
    </div>

    <script>
        // Retrieve values from localStorage
        const payableAmount = localStorage.getItem("payableAmount");
        const gstAmount = localStorage.getItem("gstAmount");
        const totalAmount = localStorage.getItem("totalAmount");

        
        // Display the values
        document.getElementById("payableAmount").innerText = payableAmount;
        document.getElementById("gstAmount").innerText = gstAmount;
        document.getElementById("totalAmount").innerText = totalAmount;
    </script>
</body>
</html>
